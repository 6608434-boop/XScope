#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
================================================================================
–§–ê–ô–õ: routes/api/profiles.py
–ù–ê–ó–ù–ê–ß–ï–ù–ò–ï: API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –±–æ—Ç–æ–≤
–ê–í–¢–û–†: Oliver Vance
–î–ê–¢–ê: 2026-02-14

–û–ü–ò–°–ê–ù–ò–ï:
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –±–æ—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞.

–ú–ê–†–®–†–£–¢:
    GET /api/bot-profiles

–ò–°–¢–û–†–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô:
    2026-02-14 - Oliver - —Å–æ–∑–¥–∞–Ω–∏–µ
================================================================================
"""

from flask import jsonify
from routes.api import api_bp
from utils.decorators import login_required
from services.profile import get_all_profiles_for_api

import logging

logger = logging.getLogger(__name__)


@api_bp.route('/bot-profiles')
@login_required
def bot_profiles():
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –±–æ—Ç–æ–≤.

    Returns:
        JSON: –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
        [
            {
                "id": "will",
                "name": "–£–∏–ª–ª –ö—É–ø–µ—Ä",
                "avatar": "ü§†",
                "description": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫, –∫—É–ª—å—Ç—É—Ä–∞ –°–®–ê"
            },
            ...
        ]
    """
    logger.info("üåê API –∑–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –±–æ—Ç–æ–≤")

    profiles = get_all_profiles_for_api()

    logger.debug(f"üìä –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ {len(profiles)} –ø—Ä–æ—Ñ–∏–ª–µ–π")

    return jsonify(profiles)